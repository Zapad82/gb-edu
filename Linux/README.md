# Начало работы
## Установка виртуальной машины:
    1. Для виртуализации рабочего стола необходимо, чтобы процессор компьютера поддерживал виртуализацию.
    2. Убедившись, что процессор поддерживает виртуальную среду, можно выбрать любое приложение, способное создавать виртуальное окружение. К примеру, VirtualBox.
    3. После установки VirtualBox нужно установить виртуальную систему. Например, Ubuntu 22.04.
    4. После успешной установки ОС, можно работать в виртуальной среде.
    5. Все взаимодействия производятся в терминале.

## Установка гостевых дополнений:
    Для работы нам потребуется установить некоторые пакеты дополнительно, используя следующие команды:
        ●sudo apt update – обновить список пакетов
        ●sudo apt install perl gcc make – установить пакеты
        ●Запуск установки гостевых дополнений
    А также по желанию можно установить графическую оболочку проводника MC и SSH-сервер:
        ●sudo apt update – обновить список пакетов
        ●sudo apt install mc – установить пакет mc
        ●sudo apt install openssh-server – установить SSH-сервер

## Подключение к виртуальной машине по SSH:
    Теперь разберемся, как подключиться к SSH через cmd. Запустите командную строку и выполните запрос вида ssh root@111.111.111.111.
    Значение root — логин для подключения, вы получили его в письме при создании сервера. 111.111.111.111 — IP-адрес сервера. Его можно посмотреть в панели управления сервером или в том же письме, которое прислал хостер. У команды может быть также дополнительный параметр -p, после которого прописывается номер порта. По умолчанию используется порт 22. Если у вас настроен другой порт, нужно явно его указать, — например, полный адрес может выглядеть так: ssh root@111.111.111.111 -p 150.

## Некоторые команды для работы с файловой системой:
    cd /home - переход в папку home
    cd или cd ~ - переход в домашнюю директорию
    cd / - переход на верхний уровень
    ls - посмотреть список файлов в каталоге, ls -al - полная детализация

    ### Специальные файловые системы:
        /dev - устройства
        /proc - процессоры и состояние ОС
            /proc/cpuinfo - процессор
            /proc/version - версия ОС
        /sys - информация о системе
        /run - временные файлы состояния

## Типы файлов:
    | Тип                  | Обозначение (ls)      | Обозначение (mc)     |
    | -------------------- | --------------------- | -------------------- |
    | Обычный файл         | -                     | нет                  |
    | -------------------- | --------------------- | -------------------- |
    | Директория           | d                     | /                    |
    | -------------------- | --------------------- | -------------------- |
    | Блочное устройство   | b                     | +                    |
    | -------------------- | --------------------- | -------------------- |
    | Символьное устр-во   | c                     | -                    |
    | -------------------- | --------------------- | -------------------- |
    | UNIX- сокет          | s                     | =                    |
    | -------------------- | --------------------- | -------------------- |
    | Именованный канал    | p                     |                      |
    | -------------------- | --------------------- | -------------------- |
    | Символическая ссылка | l                     | @ и ~                |
    | -------------------- | --------------------- | -------------------- |


## Работа с файлами:
    ls - список файлов
    pwd - текущая директория
    mkdir - создание каталога (например, mkdir test, mkdir -p 1/2/3/4/5 создаст все папки с цифрами)
    cp - копирование (cp testfile test2 - скопирует файл testfile в файл test2, cp -r test test2 - скопирует директорию test в test2)
    rm - удаление (rm test2 - удаление файла test2, rm -f test2 - в других линукс системах, rm -rf test2 - удаляет папку test2 с вложенными файлами)
    mv - переименование/перенос
    touch - создание пустого файла
    cat - вывод файла, склейка, создание
    ls -a - отображение всех файлов, включая скрытые
    -help - информация по командам
    cat > testfile - создает тестовый файл testfile, в который можно внести текст и закрыть командой ctrl+d с сохранением набранного текста

## Относительные и абсолютные пути
    Абсолютные:
        * начинаются с корня /
        * всегда указывают на один и тот же объект
        * cat /var/log/syslog
    Относительные:
        * не начинаются с /
        * зависят от текущего положения
        * cat test/testfile

## Текстовые редакторы
    Vim
        1. Командный режим
           1. навигация по файлу
           2. копирование и вставка
           3. удаление символов строк
           4. поиск текста
              1. Esc
        2. Режим редактирования
           1. ввод и редактирование текста, как в обычных редакторах
              1. I, A, O
              2. Insert
        3. Режим последней строки
           1. сохранение файла (w)
           2. выход из редактора (q)
           3. изменение настроек (set)
              1. : (двоеточие)

    Nano
        * Справка - Ctrl+G
        * Сохранение файла - Ctrl+O
        * Выход - Ctrl+X
        * Включение номеров строк - Alt-N
        * Поиск - Ctrl+W
  
    Mcedit
        * Справка - F1
        * Сохранение файла - F2
        * Выход - F10 или Esc+Esc
        * Включение номеров строк - Alt+N
        * Поиск - F7
        * Выделение блока - F3
        * Меню - F9
        * Копировать в файл - Ctrl+F
        * Вставить файл - Shift+F5

## Терминальные пейджеры
    1. less
       1. прокрутка: PgUp, PgDown, курсор
       2. поиск: / и ?
       3. справка: H
    2. more
       1. прокрутка: Enter, пробел
       2. поиск: / и ?
       3. справка: H
    head и tail
        head - начало файла head -n 10 .profile
        tail - конец файла tail -n 10 .profile
    

# Права доступа и пользователи

## Классификация пользователей в Linux
    ### Суперпользователь (root)
    * UID = 0
    * Home /root
    * Пароль не всегда
    * Есть shell
    * Неограниченные полномочия

    ### Обычный пользователь (user)
    * UID > 1000
    * Home /home/user
    * Пароль установлен
    * Есть shell
    * Доступ в рамках домашней директории

    ### Системный пользователь (deamon)
        * 1 < UID < 1000
        * Home любая
        * Пароля нет
        * Нет shell
        * Ограниченный доступ

## Атрибуты пользователя
    * UID - user ID (в Ubuntu 1000)
    * GID - group ID (в Ubuntu 1000)
    * Домашняя директория (home) (в Ubuntu /home/{user})
    * Логин (login) (в Ubuntu {user})
    * Пароль (password) (в Ubuntu *****)
    * Оболочка (shell) (в Ubuntu bin/bash)

## Хранение данных о пользователях
    /etc/passwd - список пользователей
    /etc/group - группы пользователей
    /etc/shadow - пароли пользователей

## Управление пользователями
    * useradd - создание пользователя (sudo useradd -s /bin/bash -m -d /home/testuser testuser, проверка tail /etc/passwd)
    * adduser - создание пользователя (скрипт) (sudo adduser testuser2)
    * usermod - изменение пользователя (sudo passwd testuser, sudo usermod -aG adm testuser)
    * userdel - удаление пользователя (sudo userdel testuser2)
    * passwd - изменение пароля ()
    * chage - изменение свойств пароля (sudo chage testuser)
    * groupadd - создание группы (sudo groupadd testgroup)
    * groupdel - удаление группы (sudo groupdel testgroup)

## Механизм sudo и su
    * su - переключение пользователя (exit - возврат к прежнему пользователю)
    * sudo du - переключение на суперпользователя (root)
    * sudo - выполнение команды с правами суперпользователя
    * /etc/sudoers - конфигурация sudo
    * visudo - редактирование

## Изменение владельца и группы владельца файлов
    * chown - изменение владельца и группы
      * chown -R - рекурсивно
      * chown testuser:testgroup
      * chown testuser
    
    * chgrp - изменение группы
      * chgrp -R - рекурсивно
      * chgrp testgroup

## Права доступа
    -rwxr-xr-- :
        * Владелец - совпадение пользователя -> rwx
        * Группа - пользователь в группе -> r-x
        * Остальные - все остальные пользователи -> r--

## Специальные биты
    -rwsr-sr-t :
        *SUID 4000 - для исполняемых файлов, запуск программы от имени владельца файла
        *SGID 2000 - для директорий, создание файлов с группой, назначенной для директории
        * Stycky bit 1000 - для директорий, удаление файлов только владельцам файла или директории

## Изменение прав доступа
    * chmod - change mode, изменение прав доступа
      * chmod -R testdir/ - рекурсивно
      * chmod u=rwx,g=rx,o=r testfile - символьная форма
      * chmod 751 testfile - числовая форма
      * chmod a+x - изменение для всех
      * chmod 4755 - изменение специальных битов

## Права по умолчанию
    | Значение        | Файлы       | Директории      |
    | --------------- | ----------- | --------------- |
    | Полные права    | 666         | 777             |
    | --------------- | ----------- | --------------- |
    | Значение umask  | 022         | 022             |
    | --------------- | ----------- | --------------- |
    | По дефолту      | 644         | 755             |
    | --------------- | ----------- | --------------- |

    






